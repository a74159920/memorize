<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>æŠ½é¡Œå°å·¥å…·ï¼ˆU2/U3/å…ƒç´ ï¼‰</title>
  <style>
    body { font-family: system-ui, -apple-system, "Segoe UI", Arial; margin: 24px; }
    .card { border: 1px solid #ddd; border-radius: 12px; padding: 16px; max-width: 680px; }
    .topbar { display:flex; gap: 10px; flex-wrap: wrap; align-items: center; }
    select, button, input { border-radius: 10px; border: 1px solid #ccc; }
    select { padding: 10px 12px; }
    .prompt { font-size: 44px; font-weight: 800; margin: 12px 0 6px; }
    .meta { color: #666; margin-bottom: 12px; }
    .row { display: flex; gap: 10px; flex-wrap: wrap; margin-top: 12px; }
    button { padding: 10px 14px; cursor: pointer; }
    button.primary { border: none; background: #111; color: #fff; }
    button.good { border: none; background: #0a7; color: #fff; }
    button.bad  { border: none; background: #e33; color: #fff; }
    button:disabled { opacity: .5; cursor: not-allowed; }
    input { padding: 10px 12px; width: 100%; box-sizing: border-box; }
    .hint { color: #999; font-size: 13px; margin-top: 8px; }
    .small { font-size: 14px; color: #666; margin-top: 12px; }
    .pill { font-size: 12px; color:#444; background:#f2f2f2; padding: 4px 8px; border-radius: 999px; border:1px solid #e6e6e6;}
  </style>
</head>
<body>
  <div class="card">
    <div class="topbar">
      <span class="pill" id="deckName">U2</span>
      <div style="color:#666;">æ¨¡å¼ï¼š</div>
      <select id="modeSelect">
        <option value="u2">U2</option>
        <option value="u3">U3</option>
        <option value="elements">å…ƒç´ é€±æœŸè¡¨ï¼ˆå‰30ï¼šH~Znï¼‰</option>
      </select>
      <button id="btnReset">Resetï¼ˆæ­¤æ¨¡å¼ï¼‰</button>
    </div>

    <div class="meta" style="margin-top:10px;">
      è€å¸«æ¨¡å¼ï¼šä½ çœ‹å­¸ç”Ÿå›ç­”æ˜¯å¦æ­£ç¢ºï¼Œå†æŒ‰ã€Œç­”å° / ç­”éŒ¯ã€
    </div>

    <div class="prompt" id="prompt">â€”</div>
    <div class="meta" id="remaining">å‰©é¤˜ï¼šâ€”</div>

    <div>
      <input id="studentAnswer" placeholder="ï¼ˆå¯é¸ï¼‰å­¸ç”Ÿå›ç­”ï¼ˆä½ è‡ªå·±åˆ¤æ–·å°ä¸å°ï¼‰" />
      <div class="hint">é€™è£¡ä¸æœƒè‡ªå‹•åˆ¤å®šï¼Œåªæ˜¯æ–¹ä¾¿ä½ çœ‹/ç´€éŒ„ã€‚</div>
    </div>

    <div class="row">
      <button class="primary" id="btnNext">æŠ½ä¸€é¡Œ</button>
      <button class="good" id="btnCorrect" disabled>ç­”å°</button>
      <button class="bad" id="btnWrong" disabled>ç­”éŒ¯</button>
    </div>

    <div class="hint" id="status"></div>

    <div class="small">
      âœ… é‡æ–°æ•´ç†ï¼ˆF5ï¼‰æœƒè‡ªå‹•é‡ç½®ï¼ˆä¸ä½¿ç”¨ localStorageï¼‰ã€‚<br/>
      æƒ³è¦ã€Œåˆ·æ–°ä¹Ÿä¿ç•™é€²åº¦ã€å†è·Ÿæˆ‘èªªï¼Œæˆ‘æ”¹æˆ localStorage ç‰ˆã€‚
    </div>
  </div>

<script>
  // ========= é¡Œåº«ï¼šåªæ”¾è‹±æ–‡/ç¬¦è™Ÿï¼ˆä¸æ”¾ä¸­æ–‡/éŸ³æ¨™/ä¾‹å¥ï¼‰ =========

  // U2ï¼ˆä¾ä½ æä¾›çš„ç…§ç‰‡ï¼šå…± 53 é¡Œï¼‰
  const U2 = [
    "grass",
    "red fire ant",
    "bite",
    "death",
    "rock",
    "snake",
    "spider",
    "gram",
    "insect",
    "bee",
    "inch",
    "kilogram",
    "sea level",
    "mile",
    "feet",
    "wave",
    "nest",
    "safety",
    "meter",
    "diary",
    "accident",
    "kick",
    "kill",
    "agree",
    "shout",
    "forget",
    "stay",
    "cause",
    "protect",
    "weigh",
    "drown",
    "struggle",
    "dangerous",
    "wet",
    "scary",
    "deep",
    "true",
    "wide",
    "scared",
    "few",
    "worried",
    "outdoor",
    "conscious",
    "most",
    "far",
    "suddenly",
    "below",
    "themselves",
    "stay away from...",
    "myself",
    "give... a hand",
    "until",
    "nothing",
  ];

  // U3ï¼ˆä¾ä½ æä¾›çš„ç…§ç‰‡ï¼šå…± 52 é¡Œï¼‰
  const U3 = [
    "hen",
    "web page",
    "service",
    "break",
    "goose",
    "duck",
    "goat",
    "papaya",
    "watermelon",
    "guava",
    "pear",
    "tomato",
    "peach",
    "grape",
    "turtle",
    "vegetable",
    "strawberry",
    "American",
    "million",
    "pound",
    "bean",
    "cent",
    "chance",
    "owner",
    "law",
    "labor",
    "information",
    "cocoa",
    "share",
    "make",
    "treat",
    "have",
    "pick",
    "choose",
    "produce",
    "improve",
    "weak",
    "dirty",
    "wise",
    "mean",
    "bitter",
    "hard",
    "well",
    "quickly",
    "clearly",
    "loudly",
    "slowly",
    "alone",
    "without",
    "over",
    "No problem.",
    "take... down",
  ];

  // å…ƒç´ é€±æœŸè¡¨ï¼ˆå‰ 30 å€‹ï¼šH ~ Znï¼‰
  const ELEMENTS_1_30 = [
    "H","He","Li","Be","B","C","N","O","F","Ne",
    "Na","Mg","Al","Si","P","S","Cl","Ar","K","Ca",
    "Sc","Ti","V","Cr","Mn","Fe","Co","Ni","Cu","Zn"
  ];

  const BANKS = {
    u2: { label: "U2", items: U2 },
    u3: { label: "U3", items: U3 },
    elements: { label: "å…ƒç´ é€±æœŸè¡¨ï¼ˆå‰30ï¼‰", items: ELEMENTS_1_30 },
  };

  // ========= ç‹€æ…‹ï¼ˆä¸å­˜ storageï¼šåˆ·æ–°å°± resetï¼‰ =========
  let mode = "u2";
  let remaining = [];    // å‰©é¤˜é¡Œåº«ï¼ˆstringï¼‰
  let current = null;    // ç›®å‰é¡Œç›®ï¼ˆstringï¼‰

  // ========= DOM =========
  const $deckName = document.getElementById("deckName");
  const $modeSelect = document.getElementById("modeSelect");
  const $prompt = document.getElementById("prompt");
  const $remaining = document.getElementById("remaining");
  const $status = document.getElementById("status");
  const $studentAnswer = document.getElementById("studentAnswer");

  const $btnNext = document.getElementById("btnNext");
  const $btnCorrect = document.getElementById("btnCorrect");
  const $btnWrong = document.getElementById("btnWrong");
  const $btnReset = document.getElementById("btnReset");

  function setButtons(hasCurrent) {
    $btnCorrect.disabled = !hasCurrent;
    $btnWrong.disabled = !hasCurrent;
  }

  function render() {
    $deckName.textContent = BANKS[mode].label;
    $remaining.textContent = `å‰©é¤˜ï¼š${remaining.length}`;
  }

  function resetDeck() {
    remaining = [...BANKS[mode].items];
    current = null;
    $prompt.textContent = "â€”";
    $status.textContent = `å·²é‡ç½®ï¼š${BANKS[mode].label} å…± ${remaining.length} é¡Œ`;
    $studentAnswer.value = "";
    render();
    setButtons(false);
  }

  function pickOne() {
    $status.textContent = "";
    $studentAnswer.value = "";

    if (remaining.length === 0) {
      current = null;
      $prompt.textContent = "ğŸ‰ å®Œæˆ";
      render();
      setButtons(false);
      return;
    }

    const idx = Math.floor(Math.random() * remaining.length);
    current = remaining[idx];
    $prompt.textContent = current;
    render();
    setButtons(true);
  }

  function mark(correct) {
    if (!current) return;

    if (correct) {
      // ç­”å°ï¼šç§»é™¤æ‰€æœ‰åŒå­—ä¸²ï¼ˆé¿å…åŒä¸€é¡Œé‡è¤‡å‡ºç¾æ™‚åªåˆªä¸€å€‹ï¼‰
      remaining = remaining.filter(x => x !== current);
      $status.textContent = "âœ… å·²æ¨™è¨˜ï¼šç­”å°ï¼ˆå·²ç§»é™¤é€™é¡Œï¼‰";
    } else {
      $status.textContent = "âŒ å·²æ¨™è¨˜ï¼šç­”éŒ¯ï¼ˆä¿ç•™åœ¨é¡Œåº«ï¼‰";
    }

    pickOne();
  }

  // ========= events =========
  $modeSelect.addEventListener("change", () => {
    mode = $modeSelect.value;
    resetDeck();
  });

  $btnReset.addEventListener("click", resetDeck);
  $btnNext.addEventListener("click", pickOne);
  $btnCorrect.addEventListener("click", () => mark(true));
  $btnWrong.addEventListener("click", () => mark(false));

  // init
  resetDeck();
</script>
</body>
</html>
